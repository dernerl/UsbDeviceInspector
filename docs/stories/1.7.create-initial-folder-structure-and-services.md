# Story 1.7: Create Initial Folder Structure and Services

<!-- Powered by BMAD™ Core -->

## Status

**Done**

## Story

**As a** developer,
**I want** the project organized with Views, ViewModels, Models, and Services folders,
**so that** code is logically organized according to MVVM architecture.

## Acceptance Criteria

1. Folders created in `src/UsbDeviceInspector/`:
   - `Views/` (XAML views)
   - `ViewModels/` (view models)
   - `Models/` (data models)
   - `Services/` (business logic services)
   - `Assets/` (icons, images - may exist from template)
2. Existing `MainWindow.xaml` moved to `Views/` folder
3. Namespace references updated in XAML and code-behind to reflect new folder structure
4. Application builds and runs successfully after reorganization
5. No broken references or runtime errors

## Tasks / Subtasks

- [x] Create MVVM folder structure (AC: 1)
  - [x] Create `src/UsbDeviceInspector/Views/` folder
  - [x] Create `src/UsbDeviceInspector/ViewModels/` folder
  - [x] Create `src/UsbDeviceInspector/Models/` folder
  - [x] Create `src/UsbDeviceInspector/Services/` folder
  - [x] Create `src/UsbDeviceInspector/Services/Interfaces/` subfolder for DI abstractions
  - [x] Verify `src/UsbDeviceInspector/Assets/` exists (from template)

- [x] Move MainWindow to Views folder (AC: 2, 3)
  - [x] Move `MainWindow.xaml` to `Views/MainWindow.xaml`
  - [x] Move `MainWindow.xaml.cs` to `Views/MainWindow.xaml.cs`
  - [x] Update namespace in `MainWindow.xaml.cs` from `UsbDeviceInspector` to `UsbDeviceInspector.Views`
  - [x] Update `x:Class` attribute in `MainWindow.xaml` from `UsbDeviceInspector.MainWindow` to `UsbDeviceInspector.Views.MainWindow`
  - [x] Update `App.xaml.cs` to reference the new namespace `UsbDeviceInspector.Views.MainWindow`

- [x] Verify build and execution (AC: 4, 5)
  - [x] Run `dotnet build -p:Platform=x64` and verify 0 errors, 0 warnings
  - [x] Run application and verify it launches without runtime errors
  - [x] Verify the window displays correctly (same as before move)

- [x] Run existing tests (AC: 5)
  - [x] Run `dotnet test -p:Platform=x64` and verify all tests pass (1/1)

## Dev Notes

### Previous Story Insights

**Source:** [Story 1.6 Dev Agent Record]

- **CRITICAL:** Platform must be `x64` for all build/test commands (WinUI3 doesn't support AnyCPU)
- Build command: `dotnet build -p:Platform=x64`
- Test command: `dotnet test -p:Platform=x64`
- Windows App SDK version: **1.8.250907003**
- Current build: **0 errors, 0 warnings**
- Current tests: **1/1 passing**

### Project Structure Specifications

**Source:** [architecture/source-tree.md]

The architecture defines the following folder structure for `src/UsbDeviceInspector/`:

```
src/UsbDeviceInspector/
├── App.xaml                  # Application entry point (stays in root)
├── App.xaml.cs               # App lifecycle (stays in root)
├── Package.appxmanifest      # Windows app manifest (stays in root)
├── UsbDeviceInspector.csproj # Project file (stays in root)
│
├── Assets/                   # Application assets (exists from template)
│   ├── Square44x44Logo.png
│   ├── Square150x150Logo.png
│   ├── Wide310x150Logo.png
│   ├── StoreLogo.png
│   └── SplashScreen.png
│
├── Models/                   # Data models (CREATE)
│   └── (empty for now - future: UsbDevice.cs, etc.)
│
├── Services/                 # Business logic layer (CREATE)
│   └── Interfaces/           # Service abstractions for DI (CREATE)
│       └── (empty for now - future: IDeviceEnumerationService.cs, etc.)
│
├── ViewModels/               # MVVM ViewModels (CREATE)
│   └── (empty for now - future: MainViewModel.cs)
│
├── Views/                    # XAML UI Views (CREATE)
│   ├── MainWindow.xaml       # MOVE from root
│   └── MainWindow.xaml.cs    # MOVE from root
│
└── Controls/                 # Reusable XAML controls (optional - create if needed)
    └── (future: DeviceCard.xaml)
```

### Current Project State

**Files to MOVE:**
| Current Location | New Location |
|-----------------|--------------|
| `src/UsbDeviceInspector/MainWindow.xaml` | `src/UsbDeviceInspector/Views/MainWindow.xaml` |
| `src/UsbDeviceInspector/MainWindow.xaml.cs` | `src/UsbDeviceInspector/Views/MainWindow.xaml.cs` |

**Files to STAY in project root:**
- `App.xaml` / `App.xaml.cs`
- `Package.appxmanifest`
- `UsbDeviceInspector.csproj`

### Namespace Update Requirements

**Source:** [architecture/coding-standards.md#Naming Conventions]

When moving `MainWindow` to `Views/` folder:

1. **Code-behind namespace change:**
   ```csharp
   // BEFORE (MainWindow.xaml.cs)
   namespace UsbDeviceInspector;

   // AFTER (Views/MainWindow.xaml.cs)
   namespace UsbDeviceInspector.Views;
   ```

2. **XAML x:Class attribute change:**
   ```xml
   <!-- BEFORE (MainWindow.xaml) -->
   x:Class="UsbDeviceInspector.MainWindow"

   <!-- AFTER (Views/MainWindow.xaml) -->
   x:Class="UsbDeviceInspector.Views.MainWindow"
   ```

3. **App.xaml.cs update:**
   ```csharp
   // Add using statement
   using UsbDeviceInspector.Views;

   // Reference remains: new MainWindow()
   // (after adding using, no change needed to instantiation)
   ```

### Coding Standards Reminders

**Source:** [architecture/coding-standards.md]

- **Dependency Injection:** Services MUST be injected via constructor, interfaces in `Services/Interfaces/` directory
- **Naming:** Classes use PascalCase, private fields use `_camelCase` with underscore prefix
- **Test Organization:** Test files mirror source structure (future: `UsbDeviceInspector.Tests/ViewModels/MainViewModelTests.cs`)

### File Locations Summary

**Source:** [architecture/source-tree.md]

**Story 1.7 Creates (Empty Folders):**
- `src/UsbDeviceInspector/Views/`
- `src/UsbDeviceInspector/ViewModels/`
- `src/UsbDeviceInspector/Models/`
- `src/UsbDeviceInspector/Services/`
- `src/UsbDeviceInspector/Services/Interfaces/`

**Story 1.7 Moves:**
- `MainWindow.xaml` → `Views/MainWindow.xaml`
- `MainWindow.xaml.cs` → `Views/MainWindow.xaml.cs`

**Story 1.7 Modifies:**
- `Views/MainWindow.xaml` (update x:Class)
- `Views/MainWindow.xaml.cs` (update namespace)
- `App.xaml.cs` (add using statement)

### Testing

**Source:** [architecture/test-strategy-and-standards.md]

**Testing Requirements for Story 1.7:**

This story reorganizes folder structure only. No new application code is written, so no new unit tests are required.

**Verification is via build and execution:**
1. `dotnet build -p:Platform=x64` succeeds with 0 errors, 0 warnings
2. Application launches and displays window correctly
3. Existing test suite passes: `dotnet test -p:Platform=x64` (1/1 tests)

**No additional automated tests are required for this story** - it reorganizes project structure, no new business logic.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-16 | 1.0 | Initial story creation | Bob (Scrum Master) |

---

## Dev Agent Record

### Agent Model Used

Claude Opus 4.5 (claude-opus-4-5-20251101)

### File List

| File | Action |
|------|--------|
| `src/UsbDeviceInspector/Views/MainWindow.xaml` | Created (moved from root) |
| `src/UsbDeviceInspector/Views/MainWindow.xaml.cs` | Created (moved from root) |
| `src/UsbDeviceInspector/MainWindow.xaml` | Deleted |
| `src/UsbDeviceInspector/MainWindow.xaml.cs` | Deleted |
| `src/UsbDeviceInspector/App.xaml.cs` | Modified (added using statement) |
| `src/UsbDeviceInspector/ViewModels/` | Created (empty folder) |
| `src/UsbDeviceInspector/Models/` | Created (empty folder) |
| `src/UsbDeviceInspector/Services/` | Created (empty folder) |
| `src/UsbDeviceInspector/Services/Interfaces/` | Created (empty folder) |

### Completion Notes

- All MVVM folders created as specified in architecture
- MainWindow moved to Views folder with namespace updated to `UsbDeviceInspector.Views`
- App.xaml.cs updated with `using UsbDeviceInspector.Views;`
- Build: 0 errors, 0 warnings
- Tests: 1/1 passing
- Application launches and displays correctly

### Debug Log References

None - no issues encountered

### Story DoD Checklist

1. **Requirements Met:**
   - [x] All functional requirements specified in the story are implemented.
   - [x] All acceptance criteria defined in the story are met.
   - AC1: Views, ViewModels, Models, Services, Services/Interfaces folders created
   - AC2: MainWindow.xaml moved to Views folder
   - AC3: Namespaces updated (x:Class and code-behind namespace)
   - AC4: Build succeeds with 0 errors, 0 warnings
   - AC5: No broken references, app launches correctly

2. **Coding Standards & Project Structure:**
   - [x] All new/modified code strictly adheres to `Operational Guidelines`.
   - [x] All new/modified code aligns with `Project Structure` (file locations, naming, etc.).
   - [x] Adherence to `Tech Stack` for technologies/versions used.
   - [N/A] Adherence to `Api Reference` and `Data Models` - no API/data model changes.
   - [x] Basic security best practices applied.
   - [x] No new linter errors or warnings introduced.
   - [N/A] Code is well-commented - minimal code changes, structure reorganization only.

3. **Testing:**
   - [N/A] All required unit tests - story notes specify no new tests required (structure reorganization only).
   - [N/A] All required integration tests - not applicable.
   - [x] All tests pass successfully (1/1).
   - [N/A] Test coverage - no new code requiring coverage.

4. **Functionality & Verification:**
   - [x] Functionality has been manually verified (app launches, window displays correctly).
   - [x] Edge cases and potential error conditions considered - no new logic introduced.

5. **Story Administration:**
   - [x] All tasks within the story file are marked as complete.
   - [x] Clarifications documented in Dev Agent Record.
   - [x] Story wrap up section completed with agent model and changelog.

6. **Dependencies, Build & Configuration:**
   - [x] Project builds successfully without errors.
   - [x] Project linting passes (0 warnings).
   - [N/A] No new dependencies added.
   - [N/A] No new environment variables or configurations.

7. **Documentation (If Applicable):**
   - [N/A] Inline code documentation - no new public APIs or complex logic.
   - [N/A] User-facing documentation - no user-facing changes.
   - [N/A] Technical documentation - folder structure matches existing source-tree.md.

**Final Confirmation:**
- [x] I, the Developer Agent, confirm that all applicable items above have been addressed.

**Summary:** Story 1.7 successfully reorganized the project with MVVM folder structure. MainWindow moved to Views folder with proper namespace updates. Build and tests pass. No issues encountered.
